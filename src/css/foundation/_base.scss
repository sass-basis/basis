:root {
  --_background-color: transparent;

  --_base-font-family: #{ $_font-family };
  --_base-font-size-px: #{ $_base-font-size-px };

  --_border-radius: #{ $_border-radius };

  --_color-black: #{ $_color-black };

  --_color-gray: #{ $_color-gray };
  --_dark-color-gray: #{ _dark($_color-gray) };
  --_darker-color-gray: #{ _darker($_color-gray) };
  --_darkest-color-gray: #{ _darkest($_color-gray) };
  --_light-color-gray: #{ _light($_color-gray) };
  --_lighter-color-gray: #{ _lighter($_color-gray) };
  --_lightest-color-gray: #{ _lightest($_color-gray) };

  --_color-text: #{ $_color-text };
  --_dark-color-text: #{ _dark($_color-text) };
  --_darker-color-text: #{ _darker($_color-text) };
  --_darkest-color-text: #{ _darkest($_color-text) };
  --_light-color-text: #{ _light($_color-text) };
  --_lighter-color-text: #{ _lighter($_color-text) };
  --_lightest-color-text: #{ _lightest($_color-text) };

  --_color-white: #{ $_color-white };

  --_container-margin-sm: calc(#{ $_container-margin });
  --_container-margin: calc(#{ $_container-margin } * 2);

  --_container-max-width: #{ $_container-max-width };

  --_form-control-border-color: var(--_light-color-gray);
  --_form-control-border-color-hover: var(--_color-gray);
  --_form-control-border-color-focus: #85b7d9;

  --_transition-duration: #{ $_transition-duration };
  --_transition-function-timing: #{ $_transition-function-timing };
  --_transition-delay: #{ $_transition-delay };

  --_half-leading: #{ $_half-leading }; // rem. but no unit.
  --_base-font-size-px: #{ $_base-font-size-px };
  --_base-font-family: #{ $_font-family };
  --_base-line-height: #{ $_base-line-height };

  --_margin-coefficient: #{ $_margin-coefficient };
  --_margin-scale: 1;
  --_space: calc(var(--_base-line-height) * var(--_margin-coefficient));

  --_h1-margin-top: #{ $_h1-margin-top };
  --_h1-margin-bottom: #{ $_h1-margin-bottom };
  --_h2-margin-top: #{ $_h2-margin-top };
  --_h2-margin-bottom: #{ $_h2-margin-bottom };
  --_h3-margin-top: #{ $_h3-margin-top };
  --_h3-margin-bottom: #{ $_h3-margin-bottom };
  --_h4-margin-top: #{ $_h4-margin-top };
  --_h4-margin-bottom: #{ $_h4-margin-bottom };
  --_h5-margin-top: #{ $_h5-margin-top };
  --_h5-margin-bottom: #{ $_h5-margin-bottom };
  --_h6-margin-top: #{ $_h6-margin-top };
  --_h6-margin-bottom: #{ $_h6-margin-bottom };

  --_page-effect-z-index: #{ $_page-effect-z-index };

  --_harmonic-sequence-base: 8;

  /**
   * The line-height slope. If smaller, the line-height is adjusted to a smaller value as the font size increases.
   *
   * A =(1, 1.6) // 1rem / 1.6
   * B =(4, 1.1) // 4rem / 1.1
   * y = -0.1666666666667x + 1.7666666666667 // y = line-height, x = Font size ratio
   *
   * @see https://www.geogebra.org/graphing?lang=ja
   */
  --_line-height-slope: -0.16666;

  /**
   * Font size level.
   * It is not recommended to override this value with :root in order to have the size determined based on 0.
   */
  --_font-size-level: 0;
}

* {

  $font-size-scale: calc(var(--_harmonic-sequence-base) / (var(--_harmonic-sequence-base) - var(--_font-size-level)));
  $font-size: calc(#{ $font-size-scale } * 1rem);
  $line-height: clamp(
    1,
    calc(var(--_line-height-slope) * #{ $font-size-scale } + 1 + 2 * var(--_half-leading) + -1 * var(--_line-height-slope)),
    calc(2 * var(--_half-leading) + 1)
  );

  --_font-size: #{ $font-size };
  --_line-height: #{ $line-height };

  box-sizing: border-box;

  &:before,
  &:after {
    box-sizing: inherit;
  }
}

:where(
  html,
  body,
  p,
  ol,
  ul,
  li,
  dl,
  dt,
  dd,
  table,
  blockquote,
  figure,
  fieldset,
  legend,
  pre,
  iframe,
  hr,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6
) {
  margin: 0;
  padding: 0;
}

html {
  font-size: var(--_base-font-size-px);
  line-break: normal;
  hanging-punctuation: allow-end;
}

:where(body) {
  background-color: var(--_background-color);
  color: var(--_color-text);
  font-family: var(--_base-font-family);
}

body {
  -webkit-font-smoothing: antialiased;
  // -moz-osx-font-smooting: grayscale; // White out elements will activate this.
  @include _set-font-size-level(0);
}

:where(
  code,
  kbd,
  pre,
  samp
) {
  @include _set-font-size-level(-1);
  font-family: '_', monospace;
}

:where(
  code,
  kbd
) {
  background-color: var(--_lighter-color-gray);
  border-radius: var(--_border-radius);
  padding: 2px 6px;
}

pre code {
  display: block;
  background-color: transparent;
  border-radius: 0;
  padding: 0;
}

:where(
  input,
  textarea,
  keygen,
  select,
  button
) {
  font-family: var(--_base-font-family);
}

:where(
  input,
  textarea,
  optgroup,
  select,
  button
) {
  @include _set-font-size-level(0);
}

label {
  cursor: pointer;
}

picture,
figure {
  width: fit-content;
  max-width: 100%;
}

:where(figure, picture) {
  :where(img, video) {
    margin-top: 0;
    margin-bottom: 0;
    display: table;
  }

  :where(img:not([width]), video:not([width])) {
    width: 100%;
  }
}

img,
video {
  height: auto;
  max-width: 100%;
}

figcaption {
  @include _set-font-size-level(-1);
  @include _margin(.25, 0, 0);
  caption-side: bottom;
  text-align: left;
}

/*
---
name: Headings
category:
  - foundation/typography
  - foundation/typography/headings
---
Headings

### html
```html
<h1>h1</h1>
<h2>h2</h2>
<h3>h3</h3>
<h4>h4</h4>
<h5>h5</h5>
<h6>h6</h6>
```
*/

:where(
  h1,
  h2,
  h3,
  h4,
  h5,
  h6
) {
  font-weight: bold;
}

h1 {
  @include _set-font-size-level(4);
}

h2 {
  @include _set-font-size-level(3);
}

h3 {
  @include _set-font-size-level(2);
}

h4 {
  @include _set-font-size-level(1);
}

h5 {
  @include _set-font-size-level(0);
}

h6 {
  @include _set-font-size-level(0);
}

/*
---
name: Lists
category:
  - foundation/typography
  - foundation/typography/lists
---
Lists

### html
```html
<h3>ul</h3>
<ul>
  <li>Lorem ipsum dolor sit amet</li>
  <li>
    consectetur adipisicing elit
    <ul>
      <li>Lorem ipsum dolor sit amet</li>
      <li>
        consectetur adipisicing elit
        <ul>
          <li>Lorem ipsum dolor sit amet</li>
          <li>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</li>
        </ul>
      </li>
      <li>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</li>
    </ul>
  </li>
  <li>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</li>
</ul>

<h3>ol</h3>
<ol>
  <li>Lorem ipsum dolor sit amet</li>
  <li>
    consectetur adipisicing elit
    <ol>
      <li>Lorem ipsum dolor sit amet</li>
      <li>
        consectetur adipisicing elit
        <ol>
          <li>Lorem ipsum dolor sit amet</li>
          <li>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</li>
        </ol>
      </li>
      <li>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</li>
    </ol>
  </li>
  <li>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</li>
</ol>

<h3>dl</h3>
<dl>
  <dt>Lorem ipsum dolor sit amet</dt>
  <dd>consectetur adipisicing elit</dd>
  <dt>Lorem ipsum dolor sit amet</dt>
  <dd>consectetur adipisicing elit</dd>
</dl>
```
*/

:where(
  ul,
  ol
) {
  padding-left: 1.5em;
}

:where(dt) {
  font-weight: bold;
}
